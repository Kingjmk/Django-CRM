{% extends 'main/base.html' %}

{% block content %}

<div>
    <div class="pb-5 pt-5 text-left row">
        <h2>Customers</h2>
    </div>
    <div class="row col-3">
        <button class="btn btn-info mb-3 text-left" type="button" data-toggle="collapse" data-target="#collapseExample" aria-expanded="false" aria-controls="collapseExample"> Add Customer </button>
    </div>
    <div class="row"> 
        <form class="form collapse" id="collapseExample" action="{% url 'main:customeradd'%}" method="post">
            {% csrf_token %}
            {% if error_message %}<p><strong>{{ error_message }}</strong></p>{% endif %}

            <div class="form-group">
                <label for="name" class="form-label">Customer Name</label>
                <input type="text" name="name" class="form-control">
            </div>
            <div class="form-group">
                <label for="phonenumber" class="form-label">Phone Number</label>
                <input type="text" name="phonenumber" class="form-control">
            </div>

            <input type="submit" class="btn btn-primary float-left" value="Add">
        </form>
    </div>
    {% if latest_customer %}
    <div class="row">
        <table class="table col-12">
            <thead>
                <tr>
                    <th scope="col">#</th>
                    <th scope="col">Name</th>
                    <th scope="col">Phone Number</th>
                    <th scope="col"></th>
                </tr>
            </thead>
            <tbody>
                {% for cc in latest_customer %}
                <tr>
                    <th scope="row">{{  forloop.counter }}</th>
                    <td><a href="{% url 'main:customers' cc.id %}">{{ cc.name }}</a></td>
                    <td>{{ cc.phonenumber }}</td>
                    <td>
                        <a style="float: right;margin:0 10px" href="{% url 'main:customerdelete' cc.id %}"> Delete </a>
                        <a style="float: right;margin:0 10px" href="{% url 'main:customeredit' cc.id %}"> Edit </a>
                    </td>
                    
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% else %}
        <p>No customers are available.</p>
        {% endif %}
    </div>
</div>


{% endblock  %}